<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1> 创建一个记录学生成绩的对象，提供一个添加成绩的方法，以及一个显示学生平均成绩的方法。</h1>
    <button id = "button">添加成绩</button>
    <table id='table'></table>
    <h2 id='GPA'></h2>
</body>
<script>
    //表格数据渲染
    function bindtableDate(data){
        var _table = document.getElementById('table');
        var _html = data.reduce((str,item)=>{
            return `${str}<tr><td>${item.name}</td><td>${item.grade}</td></tr>`
        },`<tr><th>学生</th> <th>成绩</th> </tr>`)
        _table.innerHTML=_html;
    }
    //生成随机汉字
    function getRandomChineseWord() {
        var _rsl = "";
        var _randomUniCode = Math.floor(Math.random() * (40870 - 19968) + 19968).toString(16);
        eval("_rsl=" + '"\\u' + _randomUniCode + '"');
        return _rsl;
    }
    //计算平均成绩
    function computeGPA(data){
        var _GPA = document.getElementById('GPA')
        var _gpa = data.reduce((num,item)=>{
            return num+item.grade*1;
        },0)/data.length
        _GPA.innerHTML = _gpa.toFixed(2)
    }
    //按钮事件绑定
    function bindButtonClick(data){
        var _button = document.getElementById('button');
        _button.addEventListener('click',()=>{
            var name = getRandomChineseWord()
            var _item = {
                name,
                grade:parseInt(Math.random()*100)
            }
            data.push(_item);
            bindtableDate(data);
            computeGPA(data);
        })
    }

    let arr = [{name:'a',grade:'56'}];
    bindButtonClick(arr)
</script>
</html>